<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>OTRSSqlQueriesHistory</Name>
    <Version>1.0.0</Version>
    <Vendor>bieli.net</Vendor>
    <URL>http://bieli.net/</URL>
    <License>This source code is published under GPL v3 licence</License>
    <Description Lang="en">This OTRS 3 package extends AdminSelectBox module for storing SQL queries history.</Description>
    <Description Lang="pl">Moduł ten rozszerza moduł AdminSelectBox o składowanie historii zapytań SQL.</Description>
    <Framework>3.0.x</Framework>
    <BuildDate>2013-03-13 19:11:10</BuildDate>
    <BuildHost>yourhost.example.com</BuildHost>
    <Filelist>
        <File Location="Kernel/Config/Files/OTRSSqlQueriesHistory.xml" Permission="666" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+CjxvdHJzX2NvbmZpZyB2ZXJzaW9uPSIxLjAiIGluaXQ9IkFwcGxpY2F0aW9uIj4KICAgIDxDVlM+JElkOiBPVFJTU3FsUXVlcmllc0hpc3RvcnkueG1sLHYgMS4wLjAuMCAyMDEyLzA5LzIyIDIxOjEyOjIgYmllbGkgRXhwICQ8L0NWUz4KICAgIDxDb25maWdJdGVtIE5hbWU9IkZyb250ZW5kOjpNb2R1bGUjIyNBZG1pblNlbGVjdEJveCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5Gcm9udGVuZCBtb2R1bGUgcmVnaXN0cmF0aW9uIGZvciB0aGUgYWdlbnQgaW50ZXJmYWNlLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPEdyb3VwPkZyYW1ld29yazwvR3JvdXA+CiAgICAgICAgPFN1Ykdyb3VwPkZyb250ZW5kOjpBZG1pbjo6TW9kdWxlUmVnaXN0cmF0aW9uPC9TdWJHcm91cD4KICAgICAgICA8U2V0dGluZz4KICAgICAgICAgICAgPEZyb250ZW5kTW9kdWxlUmVnPgogICAgICAgICAgICAgICAgPEdyb3VwPmFkbWluPC9Hcm91cD4KICAgICAgICAgICAgICAgIDxEZXNjcmlwdGlvbj5BZG1pbjwvRGVzY3JpcHRpb24+CiAgICAgICAgICAgICAgICA8VGl0bGU+U1FMIEJveDwvVGl0bGU+CiAgICAgICAgICAgICAgICA8TmF2QmFyTmFtZT5BZG1pbjwvTmF2QmFyTmFtZT4KICAgICAgICAgICAgICAgIDxOYXZCYXJNb2R1bGU+CiAgICAgICAgICAgICAgICAgICAgPE1vZHVsZT5LZXJuZWw6Ok91dHB1dDo6SFRNTDo6TmF2QmFyTW9kdWxlQWRtaW48L01vZHVsZT4KICAgICAgICAgICAgICAgICAgICA8TmFtZSBUcmFuc2xhdGFibGU9IjEiPlNRTCBCb3g8L05hbWU+CiAgICAgICAgICAgICAgICAgICAgPERlc2NyaXB0aW9uIFRyYW5zbGF0YWJsZT0iMSI+RXhlY3V0ZSBTUUwgc3RhdGVtZW50cy48L0Rlc2NyaXB0aW9uPgogICAgICAgICAgICAgICAgICAgIDxCbG9jaz5TeXN0ZW08L0Jsb2NrPgogICAgICAgICAgICAgICAgICAgIDxQcmlvPjcwMDwvUHJpbz4KICAgICAgICAgICAgICAgIDwvTmF2QmFyTW9kdWxlPgogICAgICAgICAgICAgICAgPExvYWRlcj4KICAgICAgICAgICAgICAgICAgICA8SmF2YVNjcmlwdD50aGlyZHBhcnR5L2pzdG9yYWdlL2pzdG9yYWdlLmpzPC9KYXZhU2NyaXB0PgogICAgICAgICAgICAgICAgICAgIDxKYXZhU2NyaXB0PkNvcmUuQWdlbnQuQWRtaW4uQWRtaW5TZWxlY3RCb3guanM8L0phdmFTY3JpcHQ+CiAgICAgICAgICAgICAgICA8L0xvYWRlcj4KICAgICAgICAgICAgPC9Gcm9udGVuZE1vZHVsZVJlZz4KICAgICAgICA8L1NldHRpbmc+CiAgICA8L0NvbmZpZ0l0ZW0+Cjwvb3Ryc19jb25maWc+Cgo=</File>
        <File Location="var/httpd/htdocs/js/Core.Agent.Admin.AdminSelectBox.js" Permission="666" Encode="Base64">Ly8gLS0KLy8gQ29yZS5BZ2VudC5BZG1pbi5BZG1pblNlbGVjdEJveC5qcyAtIHByb3ZpZGVzIHRoZSBzcGVjaWFsIG1vZHVsZSBmdW5jdGlvbnMgZm9yIHRoZSBBZG1pblNlbGVjdEJveAovLyBDb3B5cmlnaHQgKEMpIDIwMDEtMjAxMyBiaWVsaSwgaHR0cDovL2JpZWxpLm5ldC8KLy8gLS0KLy8gJElkOiBDb3JlLkFnZW50LkFkbWluLkFkbWluU2VsZWN0Qm94LmpzLHYgMS4wLjAuMCAyMDEyLzA5LzIwIDE2OjE1OjM0IGJpZWxpIEV4cCAkCi8vIC0tCi8vIFRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCi8vIHRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKLy8gZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KLy8gLS0KCiJ1c2Ugc3RyaWN0IjsKCnZhciBDb3JlID0gQ29yZSB8fCB7fTsKQ29yZS5BZ2VudCA9IENvcmUuQWdlbnQgfHwge307CkNvcmUuQWdlbnQuQWRtaW4gPSBDb3JlLkFnZW50LkFkbWluIHx8IHt9OwoKLyoqCiAqIEBuYW1lc3BhY2UgICBBZG1pblNlbGVjdEJveAogKiBAZXhwb3J0cyAgICAgVGFyZ2V0TlMgYXMgQ29yZS5BZ2VudC5BZG1pbi5BZG1pblNlbGVjdEJveAogKiBAZGVzY3JpcHRpb24gCiAqICAgICAgVGhpcyBuYW1lc3BhY2UgY29udGFpbnMgdGhlIHNwZWNpYWwgbW9kdWxlIGZ1bmN0aW9ucyBmb3IgdGhlIEFkbWluU2VsZWN0Qm94IG1vZHVsZS4KICovCkNvcmUuQWdlbnQuQWRtaW4uQWRtaW5TZWxlY3RCb3ggPSAoZnVuY3Rpb24gKFRhcmdldE5TKSB7CgogICAgZnVuY3Rpb24gYWRkQmxvY2soKSB7CiAgICAgICAgJCgnZGl2LlNpZGViYXJDb2x1bW4nKS5hcHBlbmQoJzxkaXYgY2xhc3M9IldpZGdldFNpbXBsZSI+PGRpdiBjbGFzcz0iSGVhZGVyIj48aDI+U1FMIFF1ZXJpZXMgSGlzdG9yeTwvaDI+PC9kaXY+PGRpdiBjbGFzcz0iQ29udGVudCI+PHA+PHVsIGlkPSJzcWxfcXVlcmllcyI+PC91bD48L3A+PC9kaXY+PC9kaXY+Jyk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIGxvYWRMaXN0KCkgewogICAgICAgIHZhciBzcWxfcXVlcmllcyA9IFtdOwogICAgICAgIHZhciBxdWVyeSA9ICcnOwogICAgICAgIHZhciB0aW1lc3RhbXAgPSAnJzsKCiAgICAgICAgT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKQogICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihrZXkpewogICAgICAgICAgICAgICAgaWYgKC9eKG90cnM6OikvLnRlc3Qoa2V5KSkgewogICAgICAgICAgICAgICAgICAgcXVlcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwoKICAgICAgICAgICAgICAgICAgIHNxbF9xdWVyaWVzLnB1c2goeyAndGltZXN0YW1wJyA6IGtleS5zdWJzdHJpbmcoJ290cnM6OnNxbF9sb2dfJy5sZW5ndGgsIGtleS5sZW5ndGgpLCAncXVlcnknIDogcXVlcnkgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChzcWxfcXVlcmllcykgewogICAgICAgICAgICB2YXIgbGFzdCA9ICIiOwogICAgICAgICAgICB2YXIgaXRlbSA9IDE7CgogICAgICAgICAgICBzcWxfcXVlcmllcy5mb3JFYWNoKCBmdW5jdGlvbihrLCB2KSB7IAogICAgICAgICAgICAgICAgaWYgKCBsYXN0ICE9IGsucXVlcnkgKSB7CiAgICAgICAgICAgICAgICAgICQoJ3VsI3NxbF9xdWVyaWVzJykuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgJCgnPGxpPicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGJ1dHRvbj4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3NxaF9idG5fZGVsZXRlXycgKyBpdGVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3NxaF9idG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0eWxlJywgJ2hlaWdodDogMjBweDsgd2lkdGg6IDIwcHg7IGZvbnQtc2l6ZTogMTJweDsgY29sb3I6IHJlZDsnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCAnc3FoX2J0bl9kZWxldGVfJyArIGl0ZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZGF0YS10aW1lc3RhbXAnLCBrLnRpbWVzdGFtcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvbkNsaWNrJywgJ0NvcmUuQWdlbnQuQWRtaW4uQWRtaW5TZWxlY3RCb3gucmVtb3ZlU3FsTG9nSXRlbSgnICsgay50aW1lc3RhbXAgKyAnLCAnICsgaXRlbSArICcpJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCJ4IikKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGJ1dHRvbj4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3NxaF9idG5fJyArIGl0ZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnc3FoX2J0bicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3R5bGUnLCAnaGVpZ2h0OiAyMHB4OyB3aWR0aDogMjBweDsgZm9udC1zaXplOiAxMnB4OyBjb2xvcjogZ3JlZW47JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgJ3NxaF9idG5fJyArIGl0ZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZGF0YS10aW1lc3RhbXAnLCBrLnRpbWVzdGFtcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvbkNsaWNrJywgIkNvcmUuQWdlbnQuQWRtaW4uQWRtaW5TZWxlY3RCb3gudXNlTG9nSXRlbSgnIiArIGsudGltZXN0YW1wICsgIicpIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCLih5IiKQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8c3Bhbj4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoJyAnICsgay5xdWVyeS5zbGljZSgwLCAzMCkgKyAnIFsuLl0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgay5xdWVyeSkKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICBsYXN0ID0gay5xdWVyeTsKICAgICAgICAgICAgICAgICAgaXRlbSsrOwogICAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwoKLyoKICBPYmplY3Qua2V5cyhsb2NhbFN0b3JhZ2UpCiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7CiAgICAgICAgICAgaWYgKC9eKG90cnM6OikvLnRlc3Qoa2V5KSkgewogICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpOwogICAgICAgICAgIH0KICAgICAgIH0pOwoKCgogICAgT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKSAKICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihrZXkpeyAKICAgICAgICAgICAgaWYgKGtleS5zdWJzdHJpbmcoMCxteUxlbmd0aCkgPT0gc3RhcnRzV2l0aCkgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTsgCiAgICAgICAgICAgIH0gCiAgICAgICAgfSk7IAoqLwoKICAgIGZ1bmN0aW9uIGFkZFNxbExvZ0l0ZW0oc3FsX3F1ZXJ5KSB7CiAgICAgICAgdmFyIHRpbWVzdGFtcCA9ICtuZXcgRGF0ZSgpLmdldFRpbWUoKTsKY29uc29sZS5sb2coJ2FkZFNxbExvZ0l0ZW06ICcsIHRpbWVzdGFtcCwgc3FsX3F1ZXJ5KTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnb3Ryczo6c3FsX2xvZ18nICsgdGltZXN0YW1wLCBzcWxfcXVlcnkpOwogICAgfTsKCiAgICBUYXJnZXROUy51c2VMb2dJdGVtID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkgewogICAgICAgICAgdmFyIHNxbF9xdWVyeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvdHJzOjpzcWxfbG9nXycgKyB0aW1lc3RhbXApOwpjb25zb2xlLmxvZygndXNlTG9nSXRlbTogJywgc3FsX3F1ZXJ5KTsKCiAgICAgICAgICBzcWxfcXVlcnlfYXJyID0gc3FsX3F1ZXJ5LnNwbGl0KCIgTElNSVQgIik7CmNvbnNvbGUubG9nKCd1c2VMb2dJdGVtIHNwbGl0OiAnLCBzcWxfcXVlcnlfYXJyKTsKCiAgICAgICAgICAkKCcjU1FMJykudmFsKHNxbF9xdWVyeV9hcnJbMF0pOwogICAgICAgICAgJCgnI01heCcpLnZhbChzcWxfcXVlcnlfYXJyWzFdKTsKICAgIH07CgogICAgVGFyZ2V0TlMucmVtb3ZlU3FsTG9nSXRlbSA9IGZ1bmN0aW9uICh0aW1lc3RhbXAsIGl0ZW0pIHsKY29uc29sZS5sb2coJ3JlbW92ZVNxbExvZ0l0ZW06ICcsIHRpbWVzdGFtcCwgaXRlbSk7CiAgICAgICAgdmFyIHNxbF9xdWVyeSA9IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdvdHJzOjpzcWxfbG9nXycgKyB0aW1lc3RhbXAsIHNxbF9xdWVyeSk7CiAgICAgICAgJCgiI3NxaF9idG5fZGVsZXRlXyIgKyBpdGVtKS5wYXJlbnQoKS5yZW1vdmUoKTsgCiAgICB9OwoKICAgIC8qKgogICAgICogQGZ1bmN0aW9uCiAgICAgKiBAcmV0dXJuIG5vdGhpbmcKICAgICAqICAgICAgVGhpcyBmdW5jdGlvbiBpbml0aWFsaXplcyB0aGUgc3BlY2lhbCBtb2R1bGUgZnVuY3Rpb25zCiAgICAgKi8KICAgIFRhcmdldE5TLkluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgnI1J1bicpLnVuYmluZCgnY2xpY2snKS5jbGljayggZnVuY3Rpb24gKCl7CiAgICAgICAgICAgIHZhciBzcWxfcXVlcnkgPSAkKCcjU1FMJykudmFsKCkudHJpbSgpICsgIiBMSU1JVCAiICsgJCgnI01heCcpLnZhbCgpLnRyaW0oKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICggc3FsX3F1ZXJ5Lmxlbmd0aCA+IDAgKSB7CiAgICAgICAgICAgICAgICBhZGRTcWxMb2dJdGVtKHNxbF9xdWVyeSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKLyoKCmlmKHJlc3VsdD09ZmFsc2Upe3ZhciBtaWxsaXNlY29uZHM9K25ldyBEYXRlKCkuZ2V0VGltZSgpO3NxbF9xdWVyaWVzLnB1c2goeyd0aW1lc3RhbXAnOm1pbGxpc2Vjb25kcywncXVlcnknOnNxbF9xdWVyeS50cmltKCl9KTskLmpTdG9yYWdlLnNldCgnb3Ryc19zcWxfcXVlcmllc19oaXN0b3J5JyxzcWxfcXVlcmllcyk7fX07ZnVuY3Rpb24gZGVsZXRlUXVlcnlMb2coc3FsX3F1ZXJ5X3RpbWVzdGFtcCl7Y29uc29sZS5sb2coJy0gYScsc3FsX3F1ZXJ5X3RpbWVzdGFtcCk7dmFyIHNxbF9xdWVyaWVzX25ldz1bXTt2YXIgc3FsX3F1ZXJpZXM9JC5qU3RvcmFnZS5nZXQoJ290cnNfc3FsX3F1ZXJpZXNfaGlzdG9yeScpO2lmKHNxbF9xdWVyaWVzKXtjYXIgaXRlbT0wO3NxbF9xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24oayx2KXtpZihzcWxfcXVlcnlfdGltZXN0YW1wLnRvU3RyaW5nKCk9PWsudGltZXN0YW1wLnRvU3RyaW5nKCkpe2RlbGV0ZSBzcWxfcXVlcmllc1tpdGVtXTt9CgogICAgICAgICQoJ3VsI3NxbF9xdWVyaWVzIGxpIGJ1dHRvbltpZF49InNxaF9idG5fIl0nKS5jbGljayggZnVuY3Rpb24gKCl7CiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAkKHRoaXMpLmRhdGEoInRpbWVzdGFtcCIpOwoKICAgICAgICAgICAgdmFyIHNxbF9xdWVyeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvdHJzOjpzcWxfbG9nXycgKyB0aW1lc3RhbXAsIHNxbF9xdWVyeSksCgogICAgICAgICAgICAkKCcjU1FMJykudmFsKHNxbF9xdWVyeSk7CiAgICAgICAgfSk7CgogICAgICAgICQoJ3VsI3NxbF9xdWVyaWVzIGxpIGJ1dHRvbltpZF49InNxaF9idG5fZGVsZXRlXyJdJykuY2xpY2soIGZ1bmN0aW9uICgpewogICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gJCh0aGlzKS5kYXRhKCJ0aW1lc3RhbXAiKTsKCiAgICAgICAgICAgIHZhciBzcWxfcXVlcnkgPSBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnb3Ryczo6c3FsX2xvZ18nICsgdGltZXN0YW1wLCBzcWxfcXVlcnkpLAoKICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTsKICAgICAgICB9KTsKKi8KICAgICAgICBhZGRCbG9jaygpOwoKICAgICAgICBsb2FkTGlzdCgpOwogICAgfTsKCiAgICByZXR1cm4gVGFyZ2V0TlM7Cn0oQ29yZS5BZ2VudC5BZG1pbi5BZG1pblNlbGVjdEJveCB8fCB7fSkpOwoKQ29yZS5BZ2VudC5BZG1pbi5BZG1pblNlbGVjdEJveC5Jbml0KCk7CgovLyQualN0b3JhZ2UuZmx1c2goKTsKCg==</File>
    </Filelist>
</otrs_package>